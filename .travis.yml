language: node_js
env:
  matrix:
    - NODE_ENV=production
  global:
    - secure: L/Z1yvIjGE/eD6taAN6hxeynRptdh0JETiH+ck88rG4ul0Y7PBGisYHajcOMUd3DU7BzyVcQm5u0ImYKMegr9VyoWNHnhlszh6lPTFeT+TX7t0VtTUvNKRv0Pk0yJ7VG4Oyzyd4H7hcGCFBef2Vmwz8rdafj1Mk20mmn2tBFJhIes2MJwO861kLl48EX/u8jEp+PzwxQt88eYo/f7MauM2LwiZ1EVGWKuU2qlxbYBD3pIxbHwqQIu36jfIJMwBe4U8EHdB/hAp5It4pvHNeAs+RwR+AzdcXU7vJhANZyeTkn4ln29jsoOJ585pDQnEMn2SO6a6BcqqpL+mPPcRS0Mv7SAd1NtYshuRLCpfBayAX6GTzM4if+OZcZDtw65tR7XhJ2GjkIkXcpT4aLZKv/PQEvWUhP6Mu6tqDNypXXnbv6JOnyTnqHVNZUO81bmWtSYB4EZtB+iodrlOsrC/Mp+A+tJ4hzSNJPcOyYHEOOZb15zpGJKGB2tt+rMDkBLHzJk25YsNC7tWPlQOZdJUBOgG4ZdJp5HwGhb327t4+ErZMNzCvmceQCcNOsF3ieumxpnDoJiGNNAB+itXHXQ6jR2pyv4K6XQF6mn5mnQ6rYdsgslLQcHFqhWQp+ZNsO6CnyoQbj+2agIK54c9JmYQoVC1sZUvKsVCUGhGSdqoL8P1Q=
    - secure: dfplyPnUOJ8X0iICb4p/mK0cRqeKKA9ouLTbuytr4jHufiogl75TeJ4PR/BwZ6Mv9YrpMmNvwGa88VUA9gcjUXLZtmkYVnOoIxFBr6pi6ep6uKxVs/Fh4fty9BdTnEu1v8jTEngK6JyL7PlVnCIe4ejSN+FtQWi/IHkPknIqhnLaGQ5EGD/ESJnUX6ztiC7zudZTApj90clk9LxThIwQfDIVUp7DIVMG26vKDEmhTutTzxSccGVbDz/+mZGNkhULR0pvq0qKXVB0AO1/U9/2XTpWXizptAK6dXKYgZkjRwMHaMhkYtfNfPBV3KK6YdN9aDQq9mPjFOJOnAwD8Cu86tqj227KzJPmLskj4dZydkpK+g2xLFU1RYearrR0AzL3ZWavTaCIwMGRPE2SEgwSS+WdNMDMnY2DbscrmvfTpkgJAgMtuD2jZkRB9v4kCDT8w2rbbGOQgWn7U29I8mapcG/YMTrZ2U0aUdqMOsbuqqlmTXQbgBIFSgYFOA5q+D1h6TpKYjiXWQuhAfnRHE/ZF4k9nWRqASS7BJrzbkSPSlZjk9+uwXd4NTa4UFlMbrnI9rr2MKeKNm4/YDcvQK10nOFXhZGfhdKzjOYLnXGGdjGFJwo6NsSzKY2CvCzl3EYMyFQnJUTxxY3SsdIXFZYhLGSXh6AcATAuRBI2xUmG1dA=
    - secure: tAwi6BVJBuEu1ZSuri0NYVobMMOPB7fAuAI7Bao7SU1pHaWGCsUr1YhXex40r7ePyIaSzszA2h5DUAnUToBnZAZ+otNMjgOoKKSUIcy/MLgXkXN1rIxE3Ndovl+GcgpZEF0VJn/61eRs2EyTSSM2rAF5ySLoWGHXEwLjXcSGaNtJXi1uPemkqCZPTrEVKvVzl65Mq/+bZvV1FG3W8GjWs5z/MYHGwu0BXX0cjSgz6MWva2ckW7LuAInHU8jzYFn9bKimn8rBHB8RR1/DKS7PSPfY3B9kZ4xTKNGsMbWKr+nWhhYxjj7y720K9V9KXG6vuUWbDK5yqmC4ocbg0WQGBDlsBMlIL1NzhmKYtcFslS82QsM4LDAiwHessW7hCCEp+3Sf8kq7h1Y77gzO/UsWLKbET26VcrarQdo1xDhtWoEU54yJZlAcaOPcamicTcswMrXr1fECWNsmLkPt3ECqG+JyvHIv/BrYy0oa/cu42lNi34CQejCpX1STJCvWYf+9MrUYUTPBCC8XTpoZZybK63gHE3JdA8sgJe1QlmmT/YHNuSkWUA8ntB9MgiWAzb1+pyovXBVpkf6W0Mu2P5UwWCrzX/aZZfADYoDFCf/AXAhelutM0pGl+3xDMhkl16r6YOaDUurpTNEtutfgeuCWg7aASBsgh47b9ncLdfK1CAA=
    - secure: JGrd2EUNYET44tTEIsiBh461AfCNVJsfdVhwPK04ueR43GPDIVZL48kcwES8wIxJDm9Am4tKv8gj0aXwzb7PpUNLC/Kmcwpg/Ku84hfB0Y7unYFkQD+aPtO5OjZyVcd3HLRXhlXEbvMik9ZR28sw2Ddz2FVCd3VIOQmSfpBnkeNwcCkDfBrEayEjVqfleet7Yl3fT7i/fk9cc/EwBRzN1H59M2Iv3uF1k4fXnvxOL0f4JbebF84oMRCIU/zjDqG0+hEi7TeYjgeDkc9gRB/rr36vkIQh8bUGZAAwEHbcgHO8x20bT529CtQwPmf1Q30zetchzRvWY9rYt+A6WC/dRSfJIJgUT27ZtkdOMVl6IihwcXuwe0+MR6AstoPpdn+3FGA0as4TvAcrg3ogLKLYSwg3LsChVYKsydMzeJu73DbH/9+5SLxL/cREunZFQ+Or6tlezrWyLVcYAYkYwq3vDfoFqs1Ulj4MxBqll3CfJapBWvt8WqWucKdrn4ziFd4fRx9SzFeRFhxRjcWCVeNWcrlOsl3xAidLb1w9+jxDcKNYGbF1omvclbIe4FqlPcpR8FAlkHlAcaej33bMOnmJZlmjBeI1cjreouf2ZOfAGDvlLZSXRil1uk17HGfjKitCULB5YCAnhCTWYLbPZ83VJcMuBYuFbLlyNa/0pleAdu4=
    - secure: Lzl0MxYoMswRkdbhSmwbpu+yrzD8eN4FfJWuPyJRUhT/VEn07Okl/uQMojBzGytDhlC+mPlc+AJk1lzDPtoyYWtZkMvaWMgtXQmDJxF6QaSCc507GosmpT7C7dmnLEIydViEQCADXCwfRceBmef4xCEu6fcqjUPr828c43YAW3Ie/TlPKkYi14lv7zkKKwBvKVTWFk6+/ibGnErhh1+oFe89XFF9/4QqHyI+aNVuXIRGIu5ugYs66shuFrQ4iKNVUUL9451BfuroqGHEK4OlADpb9/huw6Xv6gMvr0TkG86iAPRSwA8tqq9OhX/2b+0jOIRRSUkA/GR67Ja9jMedFOIZOtyXmFOgX9msT5zbBJkPzNTy2x7uah6kOEenygFQ7AiuwaO6pLDf9EtBGXBbP7y6AReepGtjvfo0u9UiIfc7XtGAnOVMJk4Z2k+lKLNYJe+21EBPbZ+Gf+DHBwADEncjbODDNI0SqqozK+MLN5nOxsTwi9QJNPffo0nVHnJA3tn5jL8l24Uj3K4OwszcTCZB5YJC5eZ/PCTGZn4FufQj4+I+XTRLynyAKiuYVFDOLrIimS1szWchQPNWeulmK9CRjqsfhj1C/euyzdnyS3XochjjuCqo2MjqT0AbcMx8iZdHuDMDOTMFPkZFYEozJ8ltbwxJMPqCOEm2Id0VHLo=
cache:
  directories:
    - node_modules
node_js:
  - "12"
before_deploy:
  - openssl aes-256-cbc -K $encrypted_3db8244cf380_key -iv $encrypted_3db8244cf380_iv
    -in apps-key.enc -out apps-key -d

deploy:
  provider: script
  skip-cleanup: true
  script: rsync -r 'ssh -p ${DEPLOY_PORT}' --quiet --delete-after ${TRAVIS_BUILD_DIR}/public/* ${DEPLOY_USER}@${DEPLOY_HOST}:${DEPLOY_DIRECTORY}
  on:
    branch: master
